/*! imagediff.js 1.0.0
  * (c) 2011 Carl Sutherland, Humble Software Development
  * imagediff.js is freely distributable under the MIT license.
  * Thanks to Jacob Thornton for the node/amd integration bits.
  * For details and documentation:
  * https://github.com/HumbleSoftware/js-imagediff
  */
(function(a,b){var c=this;typeof module!="undefined"?module.exports=b():typeof define=="function"&&typeof define.amd=="object"?define(b):c[a]=b(c,a)})("imagediff",function(a,b){function l(){var a=document.createElement("canvas");return a}function m(a,b){return h.width=a,h.height=b,i.clearRect(0,0,a,b),i.createImageData(a,b)}function n(a){return s(a,f)}function o(a){return s(a,d)}function p(a){return s(a,e)}function q(a){return s(a,g)}function r(a){return n(a)||o(a)||p(a)||q(a)}function s(a,b){return typeof a=="object"&&Object.prototype.toString.apply(a)===b}function t(a){var b=a.height,c=a.width;return h.width=c,h.height=b,i.putImageData(a,0,0),i.getImageData(0,0,c,b)}function u(a){if(n(a))return v(a);if(o(a))return w(a);if(p(a))return x(a);if(q(a))return a}function v(a){var b=a.height,c=a.width;return h.width=c,h.height=b,i.clearRect(0,0,c,b),i.drawImage(a,0,0),i.getImageData(0,0,c,b)}function w(a){var b=a.height,c=a.width,d=a.getContext("2d");return d.getImageData(0,0,c,b)}function x(a){var b=a.canvas,c=b.height,d=b.width;return a.getImageData(0,0,d,c)}function y(a,b){return a.width===b.width}function z(a,b){return a.height===b.height}function A(a,b){return z(a,b)&&y(a,b)}function B(a,b){var c=a.data,d=b.data,e=c.length,f;if(!A(a,b))return!1;for(f=e;f--;)if(c[f]!==d[f])return!1;return!0}function C(a,b){return(A(a,b)?D:E)(a,b)}function D(a,b){var c=a.height,d=a.width,e=m(d,c),f=a.data,g=b.data,h=e.data,i=h.length,j,k,l,n,o,p;for(l=0;l<i;l+=4)h[l]=Math.abs(f[l]-g[l]),h[l+1]=Math.abs(f[l+1]-g[l+1]),h[l+2]=Math.abs(f[l+2]-g[l+2]),h[l+3]=Math.abs(255-f[l+3]-g[l+3]);return e}function E(a,b){function r(a){i=Math.floor((c-a.height)/2),j=Math.floor((d-a.width)/2)}var c=Math.max(a.height,b.height),d=Math.max(a.width,b.width),e=m(d,c),f=a.data,g=b.data,h=e.data,i,j,k,l,n,o,p,q;for(n=h.length-1;n>0;n-=4)h[n]=255;r(a);for(k=a.height;k--;)for(l=a.width;l--;)n=4*((k+i)*d+(l+j)),o=4*(k*a.width+l),h[n+0]=f[o+0],h[n+1]=f[o+1],h[n+2]=f[o+2];r(b);for(k=b.height;k--;)for(l=b.width;l--;)n=4*((k+i)*d+(l+j)),o=4*(k*b.width+l),h[n+0]=Math.abs(h[n+0]-g[o+0]),h[n+1]=Math.abs(h[n+1]-g[o+1]),h[n+2]=Math.abs(h[n+2]-g[o+2]);return e}function F(){var a;for(a=0;a<arguments.length;a++)if(!r(arguments[a]))throw{name:"ImageTypeError",message:"Submitted object was not an image."}}var c="[object Array]",d="[object HTMLCanvasElement]",e="[object CanvasRenderingContext2D]",f="[object HTMLImageElement]",g="[object ImageData]",h=l(),i=h.getContext("2d"),j=a[b],k;return k={createCanvas:l,createImageData:m,isImage:n,isCanvas:o,isContext:p,isImageData:q,isImageType:r,toImageData:function(a){return F(a),q(a)?t(a):u(a)},equal:function(a,b){return F(a,b),a=u(a),b=u(b),B(a,b)},diff:function(a,b){return F(a,b),a=u(a),b=u(b),C(a,b)},noConflict:function(){return a[b]=j,k}},k})